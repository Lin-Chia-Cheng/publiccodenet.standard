---
order: 6
---

# 維護版本控制

<!-- SPDX-License-Identifier: CC0-1.0 -->
<!-- written in 2019 - 2022 by The Foundation for Public Code <info@publiccode.net> -->

## 需求規範

* 社群必須要有方法為[程式碼](../glossary.md#code)維護[版本控制](../glossary.md#version-control)。
* [代碼庫](../glossary.md#codebase)中的所有檔案皆必須有版本控制。
* 所有決定皆必須記錄成提交訊息。
* 每份提交訊息皆必須盡可能附上討論與議題連結。
* 代碼庫應該以分散式版本控制系統作維護。
* 貢獻者應該將相關的修改變動提交內容作群組分類。
* 維護人員應該使用像是修訂版次標記，或文字標籤，來標示代碼庫正式發行的版本。
* 貢獻者應該偏好使用能在版本控制系統中，輕鬆檢視與瞭解檔案中何處有做出更動的檔案格式。
* 貢獻者可選擇是否在提交內容中簽章，並附上電子郵件信箱，以便當未來貢獻者對其內容有疑問時，可以與之前的貢獻者聯絡。

## 此措施為何重要

版本控制代表追蹤程式碼歷來的變動。這能讓您為代碼庫製作有條理的變動歷史文件。這是大規模協作能運作的要素。

分散式版本控制能讓您：

* 擁有完整的程式碼副本與其版本歷史
* 在需要時可以將代碼庫恢復至先前版本
* 紀錄變動與變動的原因，可幫助未來開發人員瞭解整個過程
* 比較兩個不同版本
* 在將修改內容合併回代碼庫之前，各團隊可以針對修改變動平行作業
* 在沒有網路時也能繼續作業，可以日後再將修改變動合併回代碼庫與其他人整合

## 此措施辦不到的事

* 代替[成熟度宣告](document-maturity.md)。
* 保證程式碼能正確執行。
* 保證有人加入協作。

## 測試方式

* 確認代碼庫維持在版本控制狀態中，像是使用 Git 之類的軟體。
* 審查提交內容歷史紀錄，確認所有的提交訊息皆有解釋之前程式碼修改變動的原因。
* 審查提交內容歷史紀錄，確認所有提交訊息之中，盡可能在所有討論過修改變更的地方，包含變動內容以及連結位置（提供網址）。
* 檢查版本控制系統是否為分散式。
* 審查提交內容歷史紀錄，檢查是否有根據貢獻指南將相關的程式碼變動以群組分類。
* 檢查是否可能透過像是修訂版次標記，或文字標籤，來存取代碼庫中的特定版本。
* 檢查代碼庫在可能的情況下，檔案都是採用文字格式。

## 政策制定者：需要的工作

* 如果因為[政策](../glossary.md#policy)改變而在代碼庫中有新的版本，則請確認有在文件中清楚說明：
   * 政策改變的地方，
   * 代碼庫如何因應而改變。

舉例來說，在做權限管理賦予取用權的代碼庫中，如果要新增申請方類別，就會視為政策變動。

## 管理人員：需要的工作

* 支持政策制定者、開發人員與設計師，使其能清楚表達他們對代碼庫做出的改善。確保改善代碼庫不會有公關風險。

## 開發人員與設計師：需要的工作

* 提交內容的訊息要寫清楚，讓人一看就能瞭解提交修改的原因。
* 使用像是修訂版次標記，或文字標籤來標示不同版本，以方便存取特定版本。
* 提交內容的訊息要寫清楚，方便之後比較各版本。
* 在政策改變以後與政策制定者合作，說明原始碼更新的內容。

## 延伸閱讀

* Karl Fogel《[製作開源軟體：版本控制字彙](https://producingoss.com/en/vc.html#vc-vocabulary)》。
* 英國政府數位服務團《[維護程式碼的版本控制](https://www.gov.uk/service-manual/technology/maintaining-version-control-in-coding)》。
* GitHub 提供的「[GitHub學習實驗室](https://lab.github.com/)」，可學習如何使用 GitHub，或是重溫您的技巧。
* GitHub 提供的「[Git 密技表](https://education.github.com/git-cheat-sheet-education.pdf)」列出了最常用的
git 指令。
